@using Microsoft.AspNetCore.Http
@using Newtonsoft.Json
@inject IHttpContextAccessor HttpContextAccessor
@{
    var userInfo = JsonConvert.DeserializeObject<DTOModels.Response.Account>(HttpContextAccessor.HttpContext.Session.GetString("AccountData"));
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>
        KOK Dashboard
    </title>
    <!-- Favicon -->
    <link href="/img/brand/logo.png" rel="icon" type="image/png">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <!-- Icons -->
    <link href="/js/plugins/nucleo/css/nucleo.css" rel="stylesheet" />
    <link href="/js/plugins/fontawesome-free/css/all.min.css" rel="stylesheet" />
    <!-- CSS Files -->
    <link href="/css/argon-dashboard.css?v=1.1.2" rel="stylesheet" />
    @* <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> *@
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">


    @* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> *@

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    @* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> *@
    @* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script> *@
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
        <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- FontAwesome icons-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">


    <style>
        /* styles.css */

        /* Make sure the body and html take up the full height of the page */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            /* overflow: hidden; */
        }

        /* The main content should take up all available space */
        .content {
            flex: 1;
            overflow-y: auto; /* Đảm bảo phần thân có thể cuộn được */
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Footer styles */
        .footer {
            background-color: #3c3f41;
            text-align: center;
            width: 100%;
            height: 1vh;
            position: fixed;
            bottom: 0;
            left: 0;
            z-index: 3;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            height: 99vh;
        }

        .pagination {
            margin-top: 10px;
            margin-bottom: 20px;
            justify-content: center;
            width: 100%;
            padding: 10px 0;
            /* border-top: 1px solid #dee2e6; */
        }

                .container {
/*             display: flex;
            flex-direction: column;
            height: 100%;
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: auto; */
        }

        .table-container {
            flex: 1;
            height: 60vh;
            overflow: auto;          
        }

        .form-check-input {
            margin-left: 10px;
        }

        .img-cell img {
            width: 8vw;
            height: 8vh;
            display: block;
            margin: 0 auto;
            border-style: solid;
            border-color: saddlebrown;
            object-fit: cover; /* Đảm bảo hình ảnh vừa với khung */
            border-radius: 10%; /* Tạo thành hình tròn */
            margin: 10px;
            transition: transform 0.3s ease; /* Tạo hiệu ứng mượt khi phóng to */
            border-width: 1px;
        }

        video {
            border-radius: 5%;
        }

        /* .img-cell:hover img {
            transform: scale(2.5) translateX(-30px) translateY(-30px); /* Phóng to ảnh lên 1.5 lần khi di chuột vào */
            z-index: 5;
        } */

        .img-cell p {
            font-family: "Brush Script MT", sans-serif; /* Chọn font chữ */
            font-size: 16px; /* Cỡ chữ */
            font-weight: bold; /* In đậm */
            font-style: italic; /* In nghiêng */
            color: #1C5253; /* Màu sắc */
        }

        .div-cell {
            border-style: solid;
            border-color: darkslategrey;
            border-width: 0.5px;
        }

            .div-cell img {
                width: 8vw;
                height: auto;
                display: block;
                margin 0 auto;
            }

        .form-container {
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .search-results {
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
            height: 100%;
        }

        /* Ẩn form xác nhận ban đầu */
        #confirmLogout {
            display: none; /* Ẩn form khi không cần hiển thị */
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            z-index: 7;
            width: 300px;
            height: 135px;
        }

        .custom-modal-width {
            max-width: 85%; /* Tùy chỉnh phần trăm theo nhu cầu của bạn */
        }


        /* Hiển thị form khi cần */
        .modal {
            /* display: block; */
/*             display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4); */
        }

        /* Thiết kế nội dung form */
        .modal-content {
            border: 2px solid #7A99FE;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: auto;
            word-break: break-all;
        }

        /* Thiết kế nút trong form */
                  /*   .modal-content button {
                        margin: 5px;
                        padding: 10px 20px;
                        border: none;
                        border-radius: 30%;
                        background-color: #cc7f88;
                        color: white;
                        cursor: pointer;
                    }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .modal-content button:hover {
            background-color: #0056b3;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        } */

        .details-img{
            width: 60%;
            border-style: solid;
            color: slategrey;
            border-radius: 15px;
            
        }

        .formAdvanced form{
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px; /* Khoảng cách giữa các phần tử */
            padding: 20px;
        }

        .formAdvanced input[type="text"], select{
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .formAdvanced label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .formAdvanced button {
            grid-column: span 4; /* Đặt nút ở giữa, chiếm cả 4 cột */
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

            .formAdvanced button:hover {
                background-color: #218838;
            }


        .table-hover button{
            border: none;
            padding: 0;
            width: 42px;
            height: 42px;
            align-items: center;
            justify-content: center;
        }

        .dropdown-submenu {
            position: relative;
        }

            .dropdown-submenu > .dropdown-menu {
                display: none;
                position: absolute;
                left: 0; /* Đặt submenu bên dưới menu cha */
                top: 100%; /* Hiển thị menu con phía dưới mục cha */
                margin-top: 0;
                margin-left: 0;
            }

            .dropdown-submenu:hover > .dropdown-menu {
                display: block;
            }

        .dropdown:hover .dropdown-menu {
            display: block;
            margin-top: 0;
        }

        .dropdown-item.dropdown-toggle::after {
            content: "▼"; /* Mũi tên chỉ xuống */
            float: right;
        }

/* 
        .button-container {
            display: flex;
            justify-content: space-around; /* or 'center' or 'space-between' based on your design */
            gap: 10px; /* Adjust space between buttons as needed */
        }

        .confirm-button {
            background-color: #d77c7c; /* Use the color you prefer */
            padding: 10px 20px; /* Adjust padding to your needs */
            border-radius: 20px; /* Adjust the border-radius if needed */
            border: none; /* Remove default border */
            color: white; /* Text color */
            cursor: pointer; /* Add pointer cursor on hover */
        }
 */
        .button-container {
            display: flex;
            justify-content: space-between; /* Adjust alignment as needed */
            gap: 10px; /* Space between buttons */
            padding: 20px; /* Space around the buttons */
            width: 100%; /* Full width of parent */
            box-sizing: border-box; /* Include padding in width calculation */
        }

        .confirm-button {
            flex: 1; /* Make buttons equally wide */
            background-color: #d77c7c; /* Button color */
            padding: 10px; /* Padding inside buttons */
            border-radius: 20px; /* Rounded corners */
            border: none; /* Remove default border */
            color: white; /* Text color */
            cursor: pointer; /* Pointer cursor on hover */
            text-align: center; /* Center text inside buttons */
            min-width: 100px; /* Optional: minimum width to ensure readability */
        }

        .body{
            display: grid;
            grid-template-columns: 0.75fr 4.5fr;
        }
    </style>

</head>

<body class="body">
    <header style="display: flex;width: 210px;">
        <nav class="navbar navbar-vertical fixed-left navbar-expand-md navbar-light bg-white" id="sidenav-main">
            <div class="container-fluid">
                <!-- Toggler -->
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <!-- Brand -->
                <a class="navbar-brand pt-0" href="/Dashboard/Index">
                    <img src="/img/logo.jpg" class="navbar-brand-img" alt="...">
                </a>
                <!-- User -->
                <ul class="nav align-items-center d-md-none">
                    <li class="nav-item dropdown">
                        <a class="nav-link nav-link-icon" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="ni ni-bell-55"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right" aria-labelledby="navbar-default_dropdown_1">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <div class="media align-items-center">
                                <span class="avatar avatar-sm rounded-circle">
                                    <img alt="Image placeholder" src="/img/theme/team-1-800x800.jpg">
                                </span>
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
                            <div class=" dropdown-header noti-title">
                                <h6 class="text-overflow m-0">Welcome!</h6>
                            </div>
                            <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-single-02"></i>
                                <span>My profile</span>
                            </a>
                            <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-settings-gear-65"></i>
                                <span>Settings</span>
                            </a>
                            <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-calendar-grid-58"></i>
                                <span>Activity</span>
                            </a>
                            <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-support-16"></i>
                                <span>Support</span>
                            </a>
                            <div class="dropdown-divider"></div>
@*                             <a id="logoutButton" class="dropdown-item">
                                <i class="ni ni-user-run"></i>
                                <span>Đăng xuất</span>
                            </a> *@

                        </div>
                    </li>
                </ul>
                <!-- Collapse -->
                <div class="collapse navbar-collapse" id="sidenav-collapse-main">
                    <!-- Collapse header -->
                    <div class="navbar-collapse-header d-md-none">
                        <div class="row">
                            <div class="col-6 collapse-brand">
                                <a href="./index.html">
                                    <img src="/img/brand/blue.png">
                                </a>
                            </div>
                            <div class="col-6 collapse-close">
                                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#sidenav-collapse-main" aria-controls="sidenav-main" aria-expanded="false" aria-label="Toggle sidenav">
                                    <span></span>
                                    <span></span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <ul class="navbar-nav">
                        
                        <li class="nav-item">
                            @if(userInfo.Role == "Quản Trị Viên" || userInfo.Role == "ADMIN")
                            {
                                <a class="nav-link" href="#" id="dropdownMenuLink" data-bs-toggle="collapse" data-bs-target="#statsMenuCollapse" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa-solid fa-chart-column" style="color: #7A99FE;"></i>Bảng Thống Kê
                                    <span class="arrow" id="statsArrow">&#9662;</span> <!-- Down arrow initially -->
                                </a>
                            }                           
                            <div id="statsMenuCollapse" class="collapse">
                                <a class="nav-link ml-3" asp-page="/Dashboard/Index">
                                    <i class="fa-solid fa-circle" style="color: #7A99FE;font-size:7px"></i>Tổng Quan
                                </a>

                                <div class="ml-3">
                                    <a class="nav-link" href="#" id="monetaryDropdown" data-bs-toggle="collapse" data-bs-target="#monetaryCollapse" aria-expanded="false" aria-controls="monetaryCollapse">
                                        <i class="fa-solid fa-circle" style="color: #7A99FE;font-size:7px"></i>Doanh Thu
                                        <span class="arrow" id="monetaryArrow">&#9662;</span> <!-- Down arrow initially -->
                                    </a>
                                    <div id="monetaryCollapse" class="collapse">
                                        <a class="nav-link ml-3" asp-page="/Dashboard/Monetary">
                                            Doanh Thu Trong Quý
                                        </a>
                                        <a class="nav-link ml-3" asp-page="/Dashboard/Date/Monetary">
                                            Doanh Thu Trong Ngày
                                        </a>
                                    </div>
                                </div>

                                <div class="ml-3">
                                    <a class="nav-link" href="#" id="gameDropdown" data-bs-toggle="collapse" data-bs-target="#gameCollapse" aria-expanded="false" aria-controls="gameCollapse">
                                        <i class="fa-solid fa-circle" style="color: #7A99FE;font-size:7px"></i>Giao Dịch Ứng Dụng
                                        <span class="arrow" id="monetaryArrow">&#9662;</span> <!-- Down arrow initially -->
                                        </a>
                                    <div id="gameCollapse" class="collapse">
                                        <a class="nav-link ml-3" asp-page="/Dashboard/Game">
                                            Giao Dịch Trong Quý
                                        </a>
                                        <a class="nav-link ml-3" asp-page="/Dashboard/Date/Game">
                                            Giao Dịch Trong Ngày
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a asp-page="/Account/Index" class="nav-link">
                                <i class="fa-solid fa-users" style="color: #7A99FE;"></i> Danh Sách Tài Khoản
                            </a>
                        </li>

                        <li class="nav-item">
                            <a asp-page="/Song/Index" class="nav-link">
                                <i class="fa-solid fa-file-audio" style="color: #7A99FE;"></i> Danh Sách Bài Hát
                            </a>
                        </li>

                        <!-- Modified Dropdown Menu -->
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="songMenuLink" aria-haspopup="true" aria-expanded="false">
                                <i class="fa-solid fa-music" style="color: #7A99FE;"></i> Bài Hát
                                <span class="arrow" id="songArrow">&#9662;</span> <!-- Down arrow initially -->
                            </a>
                            <div id="songMenuCollapse" class="collapse">
                                <a class="nav-link ml-3" asp-page="/Genre/Index">
                                    <i class="fa-solid fa-guitar" style="color: #7A99FE;"></i> Danh Sách Thể Loại
                                </a>
                                <a class="nav-link ml-3" asp-page="/Singer/Index">
                                    <i class="fa-solid fa-microphone-lines" style="color: #7A99FE;"></i> Danh Sách Ca Sĩ
                                </a>
                                <a class="nav-link ml-3" asp-page="/Artist/Index">
                                    <i class="fa-solid fa-user-pen" style="color: #7A99FE;"></i> Danh Sách Tác Giả
                                </a>
                            </div>
                        </li>

                        @if(userInfo.Role == "Quản Trị Viên" || userInfo.Role == "ADMIN")
                        {
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="transactionMenuLink" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa-solid fa-credit-card" style="color: #7A99FE;"></i> Giao Dịch
                                    <span class="arrow" id="transactionArrow">&#9662;</span> <!-- Down arrow initially -->
                                </a>
                                <div id="transactionMenuCollapse" class="collapse">
                                    <a class="nav-link ml-3" asp-page="/Transactions/Game">
                                        <i class="fa-solid fa-tablet-screen-button" style="color: #7A99FE;"></i>Trong Ứng Dụng
                                    </a>
                                    <a class="nav-link ml-3" asp-page="/Transactions/Monetary">
                                        <i class="fa-solid fa-money-bill-wave" style="color: #7A99FE;"></i>Tiền
                                    </a>
                                </div>
                            </li>
                        }                      
                        <li class="nav-item">
                            <a asp-page="/Item/Index" class="nav-link">
                                <i class="fa-solid fa-wand-magic-sparkles" style="color: #7A99FE;"></i>Danh Sách Vật Phẩm
                            </a>
                        </li>
                        @if (userInfo.Role == "Quản Trị Viên" || userInfo.Role == "ADMIN")
                        {
                            <li class="nav-item">
                                <a asp-page="/Package/Index" class="nav-link">
                                    <i class="fa-solid fa-hand-holding-dollar" style="color: #7A99FE;"></i>Danh Sách Gói
                                </a>
                            </li>
                        }                       
                        <li class="nav-item">
                            <a asp-page="/Report/Index" class="nav-link">
                                <i class="fa-solid fa-flag" style="color: #7A99FE;"></i>Danh Sách Tố Cáo
                            </a>
                        </li>
                    </ul>
                    <!-- Divider -->
                    <hr class="my-3">
                    <!-- Heading -->
                </div>
            </div>
        </nav>
    </header>


     <div class="container">
        <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
            <div class="container-fluid">
                <!-- Brand -->
                <a class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block" href="./index.cshtml"></a>
                <!-- User -->
                <ul class="navbar-nav align-items-center d-none d-md-flex">
                    <li class="nav-item dropdown">
                        <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <div class="media align-items-center">
                                <span class="avatar avatar-sm rounded-circle">
                                    <img alt="Image placeholder" src="@userInfo.Image">
                                </span>
                                <div class="media-body ml-2 d-none d-lg-block" style="color: #7A99FE;">
                                    <span class="mb-0 text-sm  font-weight-bold">@userInfo.UserName</span>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
                            <div class=" dropdown-header noti-title">
                                <h6 class="text-overflow m-0">Chào Mừng!</h6>
                            </div>
                            <a href="/Account/Profile/Profile" class="dropdown-item">
                                <i class="ni ni-single-02"></i>
                                <span>Thông Tin Cá Nhân</span>
                            </a>
                            @* <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-settings-gear-65"></i>
                                <span>Settings</span>
                            </a>
                            <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-calendar-grid-58"></i>
                                <span>Activity</span>
                            </a>
                            <a href="./examples/profile.html" class="dropdown-item">
                                <i class="ni ni-support-16"></i>
                                <span>Support</span>
                            </a> *@
                            <div class="dropdown-divider"></div>
                            <a id="logoutButton" class="dropdown-item">
                                <i class="ni ni-user-run"></i>
                                <span>Đăng xuất</span>
                            </a>

                        </div>
                    </li>
                </ul>
                <!--End Search-->
            </div>
        </nav>

        <main role="main" class="container-fluid">
            <div class="col-12">
                <div id="confirmLogout" class="modal">
                    <div class="modal-content">
                        <b style="align-self:center;">Xác nhận thoát?</b>

                        <div class="button-container" style="align-self:center;">
                            <button class="confirm-button" id="confirmYes">Có</button>
                            <button class="confirm-button" id="confirmNo">Không</button>
                        </div>

                    </div>
                </div>
                @RenderBody()

            </div>
        </main>
    </div> 


    <br />
    <br />
    <br />

    <!-- Add custom JS to toggle the dropdown -->
    <script>
        document.getElementById('songMenuLink').addEventListener('click', function () {
            const menu = document.getElementById('songMenuCollapse');
            const arrow = document.getElementById('songArrow');

            if (menu.classList.contains('collapse')) {
                menu.classList.remove('collapse');
                menu.classList.add('expanded');
                arrow.innerHTML = '&#9652;'; // Up arrow when expanded
            } else {
                menu.classList.add('collapse');
                menu.classList.remove('expanded');
                arrow.innerHTML = '&#9662;'; // Down arrow when collapsed
            }
        });

        document.getElementById('transactionMenuLink').addEventListener('click', function () {
            const menu = document.getElementById('transactionMenuCollapse');
            const arrow = document.getElementById('transactionArrow');

            if (menu.classList.contains('collapse')) {
                menu.classList.remove('collapse');
                menu.classList.add('expanded');
                arrow.innerHTML = '&#9652;'; // Up arrow when expanded
            } else {
                menu.classList.add('collapse');
                menu.classList.remove('expanded');
                arrow.innerHTML = '&#9662;'; // Down arrow when collapsed
            }
        });

        document.getElementById('dropdownMenuLink').addEventListener('click', function () {
            const menu = document.getElementById('statsMenuCollapse');
            const arrow = document.getElementById('statsArrow');

            if (menu.classList.contains('collapse')) {
                menu.classList.remove('collapse');
                menu.classList.add('expanded');
                arrow.innerHTML = '&#9652;'; // Up arrow when expanded
            } else {
                menu.classList.add('collapse');
                menu.classList.remove('expanded');
                arrow.innerHTML = '&#9662;'; // Down arrow when collapsed
            }
        });

        document.getElementById('monetaryDropdown').addEventListener('click', function () {
            const menu = document.getElementById('monetaryCollapse');
            const arrow = document.getElementById('monetaryArrow');

            if (menu.classList.contains('collapse')) {
                menu.classList.remove('collapse');
                menu.classList.add('expanded');
                arrow.innerHTML = '&#9652;'; // Up arrow when expanded
            } else {
                menu.classList.add('collapse');
                menu.classList.remove('expanded');
                arrow.innerHTML = '&#9662;'; // Down arrow when collapsed
            }
        });

        document.getElementById('gameDropdown').addEventListener('click', function () {
            const menu = document.getElementById('gameCollapse');
            const arrow = document.getElementById('gameArrow');

            if (menu.classList.contains('collapse')) {
                menu.classList.remove('collapse');
                menu.classList.add('expanded');
                arrow.innerHTML = '&#9652;'; // Up arrow when expanded
            } else {
                menu.classList.add('collapse');
                menu.classList.remove('expanded');
                arrow.innerHTML = '&#9662;'; // Down arrow when collapsed
            }
        });



        document.addEventListener('DOMContentLoaded', () => {
            // Function to save the state of the dropdown
            function saveDropdownState(id) {
                const element = document.getElementById(id);
                if (element && element.classList.contains('show')) {
                    localStorage.setItem(id, 'shown');
                } else {
                    localStorage.removeItem(id);
                }
            }

            // Function to restore the state of the dropdown
            function restoreDropdownState(id) {
                const state = localStorage.getItem(id);
                const element = document.getElementById(id);
                if (element) {
                    if (state === 'shown') {
                        new bootstrap.Collapse(element, { toggle: true });
                    }
                }
            }

            // Add event listeners to dropdowns
            document.querySelectorAll('[data-bs-toggle="collapse"]').forEach(element => {
                element.addEventListener('click', () => {
                    saveDropdownState(element.getAttribute('data-bs-target').substring(1));
                });
            });

            // Restore dropdown states on page load
            restoreDropdownState('statsMenuCollapse');
            restoreDropdownState('monetaryCollapse');
            restoreDropdownState('gameCollapse');
            restoreDropdownState('transactionMenuCollapse');
            restoreDropdownState('songMenuCollapse');
        });

        document.addEventListener('DOMContentLoaded', () => {
            const path = window.location.pathname;

            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                const href = link.getAttribute('href');
                if (href === path || href === '') {
                    link.classList.add('active');
                }
            });
        });
    </script>

    <!-- Add custom CSS for expanded dropdown -->
    <style>
        .expanded {
            display: block !important;
            visibility: visible !important;
        }

        .navbar-nav .nav-link.active {
            font-weight: bold;
            background-color: #e9ecef; /* or any other color to highlight */
        }

            .navbar-nav .nav-link.active .arrow {
                transform: rotate(180deg); /* Rotate arrow if needed */
            }
    </style>

   @*  <!-- Footer -->
    <footer class="footer">
        <div style="background-color: #3c3f41;">

            <div class="row align-items-center justify-content-xl-between">
                <div class="col-xl-6">
                    <div class="copyright text-center text-xl-left text-muted">
                        &copy; 2024 <a href="#" class="font-weight-bold ml-1" target="_blank">KOK Application</a>
                    </div>
                </div>
                <div class="col-xl-6">
                    <ul class="nav nav-footer justify-content-center justify-content-xl-end">
                        <li class="nav-item">
                            <a href="#" class="nav-link" target="_blank">KOK Application</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" target="_blank">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" target="_blank">MIT License</a>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </footer> *@



    <!--Logout-->
    <!-- Popup Modal -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>

        document.getElementById('logoutButton').addEventListener('click', function () {
            // Hiển thị form xác nhận
            document.getElementById('confirmLogout').style.display = 'block';
        });

        document.getElementById('confirmYes').addEventListener('click', function () {
            // Điều hướng đến trang login
            window.location.href = '/Authentication/Login';
        });

        document.getElementById('confirmNo').addEventListener('click', function () {
            // Ẩn form xác nhận và quay lại trang hiện tại
            document.getElementById('confirmLogout').style.display = 'none';
        });

    </script>


    <!--End Logout-->
    <!--   Core   -->
    <script src="/js/plugins/jquery/dist/jquery.min.js"></script>
    <script src="/js/plugins/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <!--   Optional JS   -->
    <script src="/js/plugins/chart.js/dist/Chart.min.js"></script>
    <script src="/js/plugins/chart.js/dist/Chart.extension.js"></script>
    <!--   Argon JS   -->
    <script src="/js/argon-dashboard.min.js?v=1.1.2"></script>
    <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
    <script>
        window.TrackJS &&
            TrackJS.install({
                token: "ee6fab19c5a04ac1a32a645abde4613a",
                application: "argon-dashboard-free"
            });

        // Lấy modal
        var modal = document.getElementById("advancedSearchModal");

        // Lấy nút để mở modal
        var btn = document.getElementById("advancedSearchBtn");

        // Lấy nút đóng modal
        var span = document.getElementsByClassName("close")[0];

        // Khi người dùng nhấn nút, mở modal
        btn.onclick = function () {
            modal.style.display = "block";
        }

        // Khi người dùng nhấn vào span (x), đóng modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // Khi người dùng nhấn bên ngoài modal, đóng modal
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }


        document.querySelectorAll('.dropdown-submenu > a').forEach(function (element) {
            element.addEventListener('click', function (e) {
                e.preventDefault();
                var submenu = this.nextElementSibling;
                submenu.classList.toggle('show');
            });
        });
        document.querySelectorAll('.dropdown-submenu > a').forEach(function (element) {
            element.addEventListener('click', function (e) {
                e.preventDefault();
                var submenu = this.nextElementSibling;
                submenu.classList.toggle('show');
            });
        });


    </script>


</body>

</html>